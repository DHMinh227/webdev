<script>
    const products = [
        { id: 1, name: 'Laptop', price: 999.99, image: 'ðŸ’»' },
        { id: 2, name: 'Smartphone', price: 699.99, image: 'ðŸ“±' },
        { id: 3, name: 'Headphones', price: 199.99, image: 'ðŸŽ§' },
        { id: 4, name: 'Smartwatch', price: 299.99, image: 'âŒš' }
    ];

    let cart = [];

    function addToCart(productId) {
        const item = cart.find(i => i.id === productId);

        if (item) {
            item.quantity++;
        } else {
            const product = products.find(p => p.id === productId);
            cart.push({ ...product, quantity: 1 });
        }

        renderCart();
    }

    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        renderCart();
    }

    function updateQuantity(productId, change) {
        let item = cart.find(i => i.id === productId);

        if (!item) return;

        item.quantity += change;

        if (item.quantity <= 0) {
            removeFromCart(productId);
        }

        renderCart();
    }

    function calculateTotal() {
        return cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
    }

    function renderProducts() {
        const grid = document.getElementById("productsGrid");
        grid.innerHTML = "";

        products.forEach(p => {
            grid.innerHTML += `
                <div class="product-card">
                    <div class="product-image">${p.image}</div>
                    <div class="product-name">${p.name}</div>
                    <div class="product-price">$${p.price.toFixed(2)}</div>
                    <button class="add-to-cart-btn" onclick="addToCart(${p.id})">Add to Cart</button>
                </div>
            `;
        });
    }

    function renderCart() {
        const cartItems = document.getElementById("cartItems");
        const cartTotal = document.getElementById("cartTotal");
        const cartCount = document.getElementById("cartCount");

        cartItems.innerHTML = "";

        cart.forEach(item => {
            cartItems.innerHTML += `
                <div class="cart-item">
                    <div>
                        ${item.image} <b>${item.name}</b> - $${item.price.toFixed(2)}
                    </div>
                    <div class="quantity-controls">
                        <button onclick="updateQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)">+</button>
                        <button onclick="removeFromCart(${item.id})">Remove</button>
                    </div>
                </div>
            `;
        });

        cartTotal.textContent = calculateTotal().toFixed(2);

        const count = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = count;
    }

    function toggleCart() {
        const cartSection = document.getElementById("cartSection");
        cartSection.style.display = cartSection.style.display === "none" ? "block" : "none";
    }

    renderProducts();
</script>
